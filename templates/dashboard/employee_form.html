{% extends "dashboard/base_dashboard.html" %}
{% block dashboard_title %}{% if employee %}Edit Employee{% else %}Create Employee{% endif %}{% endblock %}

{% block dashboard_content %}
<div class="card">
  <div class="card-header">
    <h5>{% if employee %}Edit{% else %}Create{% endif %} Employee</h5>
  </div>
  <div class="card-body">
    <form method="POST" enctype="multipart/form-data">
      <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">

      <div class="mb-3">
        <label class="form-label">Full name</label>
        <input name="name" class="form-control" value="{{ employee.full_name if employee else '' }}" required>
      </div>

      <div class="mb-3">
        <label class="form-label">Phone</label>
        <input name="phone" type="text" class="form-control" value="{{ employee.phone if employee else '' }}">
      </div>

      <div class="mb-3">
        <label class="form-label">Position / Title</label>
        <input name="position" type="text" class="form-control" value="{{ employee.job_title if employee else '' }}">
      </div>

      <div class="mb-3">
        <label class="form-label">Department</label>
        <select name="department" class="form-select">
          <option value="">-- none --</option>
          {% for d in departments %}
            <option value="{{ d.id }}" {% if employee and employee.department_id == d.id %}selected{% endif %}>{{ d.name }}</option>
          {% endfor %}
        </select>
      </div>

      <div class="mb-3">
        <label class="form-label">Upload Documents (optional)</label>
        <input type="file" name="documents" class="form-control" multiple>
      </div>

      <div class="mt-3">
        <button type="submit" class="btn btn-primary">Save</button>
        <a href="{% if current_user.role == 'general_director' %}
            {{ url_for('dashboard.director_dashboard') }}
          {% elif current_user.role == 'it_manager' %}
            {{ url_for('dashboard.it_manager_dashboard') }}
          {% else %}
            {{ url_for('dashboard.role_dashboard') }}
          {% endif %}" class="btn btn-outline-secondary">
          ‚Üê Back to Dashboard
        </a>
      </div>
    </form>
  </div>
</div>
{% endblock %}
